{% extends 'base/base.html' %}
{% load static %}

{% block css %}
    <link rel="stylesheet" href="{% static 'pages/homepage.css' %}"/>
{% endblock %}

{% block js %}
    <script src="{% static 'js/homepage.js' %}" type="module"></script>
{% endblock %}

{% block content %}
    <div class="container">

        {% for m in messages %}
            <div class="alert my-4 alert-info">{{ m }}</div>
        {% endfor %}

        <div id="update-info" class="mt-5">
            <div class="card">
                <div class="card-header">
                    <a id="hide-update-info"><i class="fas fa-times"></i></a>
                </div>
                <div class="card-body text-center">
                    <h1>Diary56 2.0 ü•≥</h1>
                    <div>
                        –í—Å—Ç—Ä–µ—á–∞–π—Ç–µ –µ—â—ë –±–æ–ª—å—à–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π üî•
                    </div>
                </div>
            </div>
        </div>

        {% if user.is_student and not user.student.in_klass %}
            <div class="alert alert-warning mt-5">
                –í—ã –Ω–µ —Å–æ—Å—Ç–æ–∏—Ç–µ –≤ –∫–ª–∞—Å—Å–µ. –ü–æ–ø—Ä–æ—Å–∏—Ç–µ –≤–∞—à–µ–≥–æ –∫–ª–∞—Å—Å–Ω–æ–≥–æ —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è –¥–æ–±–∞–≤–∏—Ç—å
                –≤–∞—Å –≤ –∫–ª–∞—Å—Å - –¥–æ —ç—Ç–æ–≥–æ –±–æ–ª—å—à–∞—è —á–∞—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ –±—É–¥–µ—Ç –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞.
            </div>
        {% endif %}

        <div class="row my-5">
            <div class="col-12 col-lg-6 col-xl-8">
                <div class="row">
                    {% if user.is_admin %}
                        <div class="col-6 col-md-6 col-sm-6 col-lg-6 mb-3">
                            <div class="card h-100">
                                <a href="{% url 'admin_panel' %}">
                                    <img src="{% static '/icons/panel.png' %}" id="admin-panel"
                                         class="card-img-top icon" alt="–ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞"/>
                                    <div class="card-body"><h5 class="card-title">–ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h5></div>
                                </a>
                            </div>
                        </div>
                    {% elif user.is_teacher %}
                        <div class="col-6 col-md-6 col-sm-6 col-lg-6 mb-3">
                            <div class="card h-100">
                                <a href="{% url 'my_klass:my-klass' %}"><img src="{% static 'icons/class.png' %}" class="card-img-top icon" alt="–ú–æ–π –∫–ª–∞—Å—Å">
                                    <div class="card-body"><h5 class="card-title">–ú–æ–π –∫–ª–∞—Å—Å</h5></div>
                                </a>
                            </div>
                        </div>
                        <div class="col-6 col-md-6 col-sm-6 col-lg-6 mb-3">
                            <div class="card h-100">
                                <a href="{% url 'diary' %}"><img src="{% static 'icons/open-book.svg' %}"
                                                                 class="card-img-top icon" alt="–î–Ω–µ–≤–Ω–∏–∫">
                                    <div class="card-body"><h5 class="card-title">–ñ—É—Ä–Ω–∞–ª</h5></div>
                                </a>
                            </div>
                        </div>
                    {% elif user.is_student and user.student.in_klass %}
                        <div class="col-6 col-md-6 col-sm-6 col-lg-6 mb-3">
                            <div class="card h-100">
                                <a href="{% url 'homework' %}"><img src="{% static 'icons/studying.svg' %}" class="card-img-top icon" alt="">
                                    <div class="card-body text-center"><h5 class="card-title">–î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ</h5></div>
                                </a>
                            </div>
                        </div>
                        <div class="col-6 col-md-6 col-sm-6 col-lg-6 mb-3">
                            <div class="card h-100">
                                <a href="{% url 'diary' %}"><img src="{% static 'icons/score.png' %}" class="card-img-top icon" alt="">
                                    <div class="card-body text-center"><h5 class="card-title">–û—Ü–µ–Ω–∫–∏</h5></div>
                                </a>
                            </div>
                        </div>
                        <div class="col-6 col-md-6 col-sm-6 col-lg-6 mb-3">
                            <div class="card h-100">
                                <a href="{% url 'notes:notes' %}"><img src="{% static 'icons/pencil.png' %}" class="card-img-top icon" alt="">
                                    <div class="card-body text-center"><h5 class="card-title">–ö–æ–Ω—Å–ø–µ–∫—Ç—ã</h5></div>
                                </a>
                            </div>
                        </div>
                    {% endif %}
                    <div class="col-6 col-md-6 col-sm-6 col-lg-6 mb-3">
                        <div class="card h-100">
                            <a href="{% url 'minimum' %}">
                                <img src="{% static 'icons/paper.png' %}" class="card-img-top icon" alt="–ú–∏–Ω–∏–º—É–º"/>
                                <div class="card-body text-center"><h5 class="card-title">–ú–∏–Ω–∏–º—É–º</h5></div>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-12 col-lg-6 col-xl-4">
                <div class="row">
                    {% if request.user.is_student and request.user.student.in_klass %}
                        <div class="col-12 col-lg-12 mb-3">
                            {% include 'homepage/timetable_card.html' %}
                        </div>
                    {% endif %}
                    <div class="col-12 col-lg-12">
                        {% include 'homepage/news_card.html' %}
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Prevents "update info" card from being showed once it was hidden by user
        // by adding "hide_update_info" to localStorage.
        if (localStorage.hasOwnProperty("hide_update_info"))
            $("#update-info").hide();
        else {
            $("#hide-update-info").on("click", (e) => {
                localStorage.setItem("hide_update_info", "True");
                $("#update-info").hide();
            })
        }
    </script>
{% endblock %}
